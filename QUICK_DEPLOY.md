# üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞! ‚úÖ

–ë—Ä–∞—É–∑–µ—Ä —Ç–µ–ø–µ—Ä—å –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å–±–æ—Ä–∫–∏ ‚Äî SPA –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç —Å–≤–µ–∂–∏–µ —Ñ–∞–π–ª—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ **Cache busting**: –§–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ö–µ—à–∏ (`index.a1b2c3d4.js`)
2. ‚úÖ **Nginx config**: `index.html` –Ω–µ –∫—ç—à–∏—Ä—É–µ—Ç—Å—è, –≤—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∏–π
3. ‚úÖ **Deploy script**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 1: –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ VPS

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ:
git add .
git commit -m "fix: cache busting –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–∞ (v0.11.3)"
git push origin master

# –ù–∞ VPS (SSH):
cd /path/to/ai-image-bot
git pull origin master
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è

```bash
# –ù–∞ VPS:
./redeploy-frontend.sh
```

**–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ —Å –Ω–æ–≤—ã–º–∏ —Ö–µ—à–∞–º–∏
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä—ë—Ç Docker –æ–±—Ä–∞–∑ –ë–ï–ó –∫—ç—à–∞
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä frontend
- –ü—Ä–æ–≤–µ—Ä–∏—Ç —Å—Ç–∞—Ç—É—Å

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
docker ps | grep frontend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
docker logs ai-image-bot-frontend --tail 50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å headers:
curl -I https://your-domain.com/
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: Cache-Control: no-cache, no-store, must-revalidate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏:
curl https://your-domain.com/ | grep -o 'src="[^"]*\.js"'
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: src="/assets/index.a1b2c3d4.js"
```

### –®–∞–≥ 4: –û–±–Ω–æ–≤–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞

#### –ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ (iOS/Android):
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä/–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å–≤–∞–π–ø –≤–≤–µ—Ä—Ö).
- –û—á–∏—Å—Ç–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–∞: Settings ‚Üí Browser ‚Üí Clear Browsing Data ‚Üí Cached images/files.
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–Ω–æ–≤–∞ –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://your-domain.com.

#### –ù–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (Desktop):
- –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ Chrome/Firefox/Safari.
- –ù–∞–∂–º–∏—Ç–µ `Cmd+Shift+R` (macOS) –∏–ª–∏ `Ctrl+Shift+R` (Windows/Linux) –¥–ª—è "hard reload".
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Clear Storage ‚Üí Clear site data.

## ‚ö†Ô∏è –ï—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—ë –µ—â—ë –Ω–µ –≤–∏–¥–Ω—ã

### –ú–µ—Ç–æ–¥ 1: –î–æ–±–∞–≤–∏—Ç—å query-–ø–∞—Ä–∞–º–µ—Ç—Ä –≤–µ—Ä—Å–∏–∏

1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Å—ã–ª–∫—É/—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, –¥–æ–±–∞–≤–∏–≤ `?v=2` (–∏–ª–∏ –ª—é–±–æ–π –Ω–æ–º–µ—Ä) –∫ URL.
2. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –Ω–æ–≤–æ–π —Å—Å—ã–ª–∫–æ–π —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∞–º–∏. –≠—Ç–æ –∑–∞—Å—Ç–∞–≤–∏—Ç –±—Ä–∞—É–∑–µ—Ä –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–µ–∂–∏–µ —Ñ–∞–π–ª—ã.
3. –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–∏—Ö —Ä–µ–ª–∏–∑–∞—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –Ω–æ–º–µ—Ä (`?v=3`, `?v=4` –∏ —Ç.–¥.).

### –ú–µ—Ç–æ–¥ 2: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ VPS:
docker-compose down frontend
docker rmi ai-image-bot-frontend
docker system prune -af
./redeploy-frontend.sh
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

### –£—Å–ø–µ—à–Ω—ã–π –¥–µ–ø–ª–æ–π:

‚úÖ `docker ps` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç `ai-image-bot-frontend` (Up)
‚úÖ `curl -I /` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Cache-Control: no-cache`
‚úÖ `curl /` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏: `index.a1b2c3d4.js`
‚úÖ –ë—Ä–∞—É–∑–µ—Ä/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –ü—Ä–∏–∑–Ω–∞–∫–∏ –ø—Ä–æ–±–ª–µ–º—ã:

‚ùå –ö–ª–∏–µ–Ω—Ç –≤—Å—ë –µ—â—ë –≤–∏–¥–∏—Ç —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞
‚ùå `curl /` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∞–π–ª—ã –ë–ï–ó —Ö–µ—à–µ–π: `index.js`
‚ùå `curl -I /` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Cache-Control: max-age=31536000`

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `./redeploy-frontend.sh` —Å–Ω–æ–≤–∞

## üéØ Best Practice

**–ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞:**

1. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./redeploy-frontend.sh` (–Ω–µ `docker-compose up -d`)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ headers (`curl -I`)
3. ‚úÖ –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö (Chrome/Safari/Firefox, –º–æ–±–∏–ª—å–Ω—ã–π –∏ –¥–µ—Å–∫—Ç–æ–ø)
4. ‚úÖ –ü—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö: –¥–æ–±–∞–≤—å—Ç–µ `?v=X` –≤ URL (–∫–µ—à-–±–∞—Å—Ç–µ—Ä)

**–ù–ï –¥–µ–ª–∞–π—Ç–µ:**

‚ùå `docker-compose up -d` (–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à)
‚ùå `npm run build && docker-compose restart frontend` (–∫—ç—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è)
‚ùå –î–µ–ø–ª–æ–π –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ headers

## üìö –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ñ–∞–π–ª–µ: [docs/CACHE_BUSTING.md](docs/CACHE_BUSTING.md)

---

## üÜò –ü–æ–º–æ—â—å

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—â–µ–Ω: `docker ps | grep frontend`
2. –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö: `docker logs ai-image-bot-frontend`
3. Headers –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ: `curl -I https://your-domain.com/`
4. –§–∞–π–ª—ã —Å —Ö–µ—à–∞–º–∏: `curl https://your-domain.com/ | grep assets`
- –ë—Ä–∞—É–∑–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ / –≤–∫–ª–∞–¥–∫–∞ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–∞ —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞

**–í—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç?**
‚Üí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ú–µ—Ç–æ–¥ 1 (query-–ø–∞—Ä–∞–º–µ—Ç—Ä) –∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç –Ω–æ–≤—ã–π URL
